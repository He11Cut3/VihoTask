<div class="container-fluid calendar-basic">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div id="calendar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.js"></script>

    <!-- Добавляем скрипт для загрузки русского перевода -->
    <script src="~/js/fullcalendar/ru.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                locale: 'ru',
                events: {
                    url: '/Task/GetTasks',
                    method: 'GET'
                },
                eventContent: function (info) {
                    var priority = info.event.extendedProps.priority;
                    var backgroundColor = ''; // Цвет событий по умолчанию

                    if (priority === 'Низкий') {
                        backgroundColor = '#228B22'; // Пастельный зеленый
                    }
                    else if (priority === 'Средний') {
                        backgroundColor = '#4169E1'; // Светло-серый
                    }
                    else if (priority === 'Высокий') {
                        backgroundColor = '#CD5C5C'; // Пастельный оранжевый
                    }
                    else if (priority === 'Критичный') {
                        backgroundColor = '#800000'; // Пастельный красный
                    }

                    var content = document.createElement('div');
                    content.style.backgroundColor = backgroundColor;
                    content.textContent = info.event.title;

                    return { domNodes: [content] };
                }
            });

            calendar.render();
        });
    </script>
}